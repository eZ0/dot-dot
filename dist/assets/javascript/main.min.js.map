{"version":3,"sources":["checkcoordinates.js","gallery.js","saveimage.js","main.js","modal.js"],"names":["CoordinatesChecker","url","this","checkCoord","coord","doCallback","$","ajax","type","async","data","success","calcHeight","vH","height","iH","diff","initButtons","click","e","preventDefault","checkUserdata","addClass","removeClass","data_entered","name","encodeURIComponent","val","country","file","saveRegistration","fd","FormData","document","getElementById","append","processData","contentType","done","onRegistrationSaved","fadeOut","css","opacity","alert","CanvasSaver","savePNG","cnvs","fname","down","doNotDownloadCallback","toDataURL","substr","indexOf","toString","imgdata","dataInput","createElement","setAttribute","nameInput","downloadInput","coordInput","myForm","method","action","appendChild","body","submit","removeChild","ready","bind","hide","toggle","toggleClass","canvas","style","webkitFilter","context","getContext","cs","cc","clearRect","width","fillText","console","log","isExist","baseUrl","newHref","prop","isArm","video","removeAttribute","fadeIn","hover","stop","timeDrag","on","find","unbind","play","playpause","paused","ended","pause","Plugin","option","_relatedTarget","each","$this","options","extend","Modal","DEFAULTS","show","element","$body","$element","$backdrop","isShown","scrollbarWidth","remote","load","proxy","trigger","VERSION","backdrop","keyboard","prototype","that","Event","relatedTarget","isDefaultPrevented","checkScrollbar","setScrollbar","escape","transition","support","hasClass","parent","length","appendTo","scrollTop","offsetWidth","attr","enforceFocus","one","emulateTransitionEnd","resetScrollbar","off","hideModal","target","has","which","removeBackdrop","remove","callback","animate","doAnimate","currentTarget","focus","call","callbackRemove","clientWidth","window","innerWidth","measureScrollbar","bodyPad","parseInt","scrollDiv","className","old","fn","modal","Constructor","noConflict","href","$target","replace","test","is","showEvent","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["/*\nclass for checking if a generated coordinates\nalready exist in a db\n*/\n\nfunction CoordinatesChecker(url){\n\tthis.url = url;\n\n\tthis.checkCoord = function(coord, doCallback){\n\t\tif(!url) return;\n\t\tcoord = coord || 17;\n\n\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\tasync: false,\n\t\t\turl: url,\n\t\t\tdata: {'coord': coord},\n\t\t\tsuccess: doCallback\n\t\t});\n\t\treturn ;\n\n\n\t\t//sending unique coordinate of generated image\n\t\tvar coordInput = document.createElement(\"input\") ;\n\t\tcoordInput.setAttribute(\"name\", 'coord');\n\t\tcoordInput.setAttribute(\"value\", coord);\n\t\tcoordInput.setAttribute(\"type\", \"hidden\");\n\n\t\tvar myForm = document.createElement(\"form\");\n\t\tmyForm.method = 'post';\n\t\tmyForm.action = url;\n\t\tmyForm.appendChild(coordInput);\n\n\t\t//communicating with php via submiting form\n\t\tdocument.body.appendChild(myForm);\n\t\tmyForm.submit() ;\n\t\tdocument.body.removeChild(myForm);\n\t};\n}","var data_entered = false;\n\nvar name;\nvar country;\nvar url;\n\n\n$( document ).ready(function() {\n\n\tinitButtons();\n\tcalcHeight();\n\t$('.main').bind('touchstart', function() {});\n\n\n\t// modal window clicks on upload\n\t$('#url').hide();\n\t$('#file').hide();\n\n\t$('#_url').click(function() {\n\t\t$('#url').toggle();\n\t\t$('#file').hide();\n\t});\n\t$('#_file').click(function() {\n\t\t$('#file').toggle();\n\t\t$('#url').hide();\n\t});\n\n\t$('.btn-close').click( function() {\n\t\t$(this).toggleClass('open');\n\t});\n});\n\nfunction calcHeight(){\n\t//gallery height\n\tvar vH = $('.view').height();\n\tvar iH = $('.view img').height();\n\tvar diff = vH - iH;\n\n\t$('.view').height(vH - diff);\n}\n\n\nfunction initButtons() {\n\n\t$('#submit').click(function(e) {\n\t\te.preventDefault();\n\t\tcheckUserdata();\n\t});\n\n\t$('.btn-add').click(function(){\n\t\t$('.view').addClass('isBlured');\n\t});\n\n\t$('.close').click(function(){\n\t\t$('.view').removeClass('isBlured');\n\t});\n}\n\nfunction checkUserdata() {\n\tif(!data_entered) {\n\t\tname = encodeURIComponent($('#pic-form input[name=\"name\"]').val());\n\t\tcountry = encodeURIComponent($('#pic-form input[name=\"country\"]').val());\n\t\turl = encodeURIComponent($('#pic-form input[name=\"url\"]').val());\n\t\tfile = encodeURIComponent($('#pic-form input[name=\"file\"]').val());\n\n\t\tdata_entered = true;\n\n\t\tsaveRegistration();\n\t}\n}\n\nfunction saveRegistration() {\n\tvar fd = new FormData(document.getElementById(\"pic-form\"));\n\tfd.append(\"CustomField\", \"This is some extra data\");\n\t$.ajax({\n\t\turl: \"assets/data/savedata.php?&name=\"+name+\"&country=\"+country+\"&url=\"+url+\"&file=\"+file,\n\t\ttype: \"POST\",\n\t\tdata: fd,\n\t\tprocessData: false,  // tell jQuery not to process the data\n\t\tcontentType: false   // tell jQuery not to set contentType\n\t}).done(function(data) {\n\t\tonRegistrationSaved(data_entered);\n\t});\n}\n\nfunction onRegistrationSaved(data) {\n\tif(data_entered) {\n\t\t$('#pic-form').fadeOut(500, function() {\n\t\t\t$('#thanks').css({\n\t\t\t\topacity: '1'\n\t\t\t});\n\t\t});\n\t} else {\n\t\talert(\"An error occurred saving to the database.\");\n\t}\n}\n\n\n","/*\nclass for saving canvas as png and renaming it\ncommunicates with saveimage.php which sets headers\n*/\nfunction CanvasSaver(url) {\n\n\tthis.url = url;\n\n\tthis.savePNG = function(cnvs, fname, coord, down, doNotDownloadCallback) {\n\t\t//if no canvas or url to .php - do nothing\n\t\tif(!cnvs || !url) return;\n\n\t\t//name file 'picture.png' if there is no file name given\n\t\tfname = fname || 'picture';\n\n\t\t//saving canvas element\n\t\tvar data = cnvs.toDataURL(\"image/png\");\n\t\tdata = data.substr(data.indexOf(',') + 1).toString();\n\n\t\t//unique coordinates\n\t\tcoord = coord || 10;\n\t\tdown = down || 1111;\n\n\t\tif('false' == down) {\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tasync: false,\n\t\t\t\turl: url,\n\t\t\t\tdata: {'imgdata':data, 'name':fname, 'down':'false', 'coord':coord},\n\t\t\t\tsuccess: doNotDownloadCallback\n\t\t\t});\n\t\t\treturn ;\n\t\t}\n\n\t\t//creating hidden form for sending our data for image to php and back\n\t\tvar dataInput = document.createElement(\"input\") ;\n\t\tdataInput.setAttribute(\"name\", 'imgdata') ;\n\t\tdataInput.setAttribute(\"value\", data);\n\t\tdataInput.setAttribute(\"type\", \"hidden\");\n\n\t\tvar nameInput = document.createElement(\"input\") ;\n\t\tnameInput.setAttribute(\"name\", 'name') ;\n\t\tnameInput.setAttribute(\"value\", fname + '.png');\n\n\t\tvar downloadInput = document.createElement(\"input\") ;\n\t\tdownloadInput.setAttribute(\"name\", 'down') ;\n\t\tdownloadInput.setAttribute(\"value\", down);\n\t\tdownloadInput.setAttribute(\"type\", \"hidden\");\n\n\t\t//sending unique coordinate of saved image\n\t\tvar coordInput = document.createElement(\"input\") ;\n\t\tcoordInput.setAttribute(\"name\", 'coord');\n\t\tcoordInput.setAttribute(\"value\", coord);\n\t\tcoordInput.setAttribute(\"type\", \"hidden\");\n\n\t\tvar myForm = document.createElement(\"form\");\n\t\tmyForm.method = 'post';\n\t\tmyForm.action = url;\n\t\tmyForm.appendChild(dataInput);\n\t\tmyForm.appendChild(nameInput);\n\t\tmyForm.appendChild(downloadInput);\n\t\tmyForm.appendChild(coordInput);\n\n\t\t//communicating with php via submiting form\n\t\tdocument.body.appendChild(myForm);\n\t\tmyForm.submit() ;\n\t\tdocument.body.removeChild(myForm);\n\t};\n}","$( document ).ready(function() {\n\n\tcanvas.style.webkitFilter = \"blur(1px)\";\n\n\tvar cnvs = document.getElementById('_tattoo');\n\tvar context = cnvs.getContext('2d');\n\tvar cs = new CanvasSaver('assets/data/saveimage.php');\n\n\tvar cc = new CoordinatesChecker('assets/data/checkcoord.php');\n\n\t$('#_btnwant').click(function(){\n\t\t//saving image from canvas \n\t\tcs.savePNG( cnvs, 'dotdot', coord, 'true');\n\t\t//clearing canvas\n\t\tcontext.clearRect(0, 0, cnvs.width, cnvs.height);\n\t\tcanvas.style.webkitFilter = \"blur(0px)\";\n\t\t//setting thankyou-text on canvas\n\t\tcontext.fillText(\"Thank you for using Dot:Dot! <3\", 100, 120);\n\t\tcontext.fillText(\"Enjoy & stay awesome!\", 120, 160);\n\t\tcontext.fillText(\"PS Don't forget to upload your spectacular pic to our gallery!\", 20, 180);\n\t\tcontext.fillText(\"Generate new tattoo's by clicking 'Hate it'!\", 80, 200);\n\t});\n\n\t$('#_btnhate').click(function(){\n\t\tcanvas.style.webkitFilter = \"blur(1px)\";\n\t\t$('#_explanation p').fadeOut();\n\t\tconsole.log('coord on btn is ' + coord);\n\t\tcc.checkCoord(coord, function(data){\n\t\t\tisExist = data;\n\t\t});\n\t});\n\n\t$('#_pinBtn').click(function(event) {\n\t\tcs.savePNG( cnvs, 'dotdot', coord, 'false', function(data){\n\t\t\t// var baseUrl = \"http://localhost:8888/dot-dot/\";\n\t\t\tvar baseUrl = \"http://ksenia.be/dot/\";\n\t\t\tvar newHref = baseUrl + data;\n\t\t\tvar url = \"//www.pinterest.com/pin/create/link/?url=\"+ baseUrl +\"index.php&media=\"+newHref;\n\t\t\t$(\"#_pinBtn\").prop(\"href\", url);\n\t\t});\n\t});\n\n\t$('#_arm').click(function() {\n\t\tisArm = true;\n\t\t$('.main').css('background-image', \"url('assets/images/bg-2.png')\");\n\t});\n\n\t$('#_back').click(function() {\n\t\tisArm = false;\n\t\t$('.main').css('background-image', \"url('assets/images/bg.png')\");\n\t});\n\n\t//video\n\tvar video = $('#video');\n\t\n\tvideo[0].removeAttribute(\"controls\");\n\t$('.control').fadeIn(500);\n\n\t$('.video-wrapper').hover(function() {\n\t\t$('.control').stop().fadeIn();\n\t\t}, function() {\n\t\t\tif(!timeDrag){\n\t\t\t\t$('.control').stop().fadeOut();\n\t\t\t}\n\t\t})\n\t\t.on('click', function() {\n\t\t\t$('.btnPlay').find('.icon-play').addClass('icon-pause').removeClass('icon-play');\n\t\t\t$(this).unbind('click');\n\t\t\tvideo[0].play();\n\t\t});\n\n\tvideo.on('click', function() {\n\t\tplaypause(); \n\t});\n\n\t$('.btnPlay').on('click', function() {\n\t\tplaypause(); \n\t});\n\n\tvar playpause = function() {\n\t\tif(video[0].paused || video[0].ended) {\n\t\t\t$('.btnPlay').addClass('paused');\n\t\t\t$('.btnPlay').find('.icon-play').addClass('icon-pause').removeClass('icon-play');\n\t\t\tvideo[0].play();\n\t\t}\n\t\telse {\n\t\t\t$('.btnPlay').removeClass('paused');\n\t\t\t$('.btnPlay').find('.icon-pause').removeClass('icon-pause').addClass('icon-play');\n\t\t\tvideo[0].pause();\n\t\t}\n\t};\n});","/* ========================================================================\n* Bootstrap: modal.js v3.2.0\n* http://getbootstrap.com/javascript/#modals\n* ========================================================================\n* Copyright 2011-2014 Twitter, Inc.\n* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n* ======================================================================== */\n\n\n+function ($) {\n\t'use strict';\n\n// MODAL CLASS DEFINITION\n// ======================\n\nvar Modal = function (element, options) {\n\tthis.options        = options\n\tthis.$body          = $(document.body)\n\tthis.$element       = $(element)\n\tthis.$backdrop      =\n\tthis.isShown        = null\n\tthis.scrollbarWidth = 0\n\n\tif (this.options.remote) {\n\t\tthis.$element\n\t\t.find('.modal-content')\n\t\t.load(this.options.remote, $.proxy(function () {\n\t\t\tthis.$element.trigger('loaded.bs.modal')\n\t\t}, this))\n\t}\n}\n\nModal.VERSION  = '3.2.0'\n\nModal.DEFAULTS = {\n\tbackdrop: true,\n\tkeyboard: true,\n\tshow: true\n}\n\nModal.prototype.toggle = function (_relatedTarget) {\n\treturn this.isShown ? this.hide() : this.show(_relatedTarget)\n}\n\nModal.prototype.show = function (_relatedTarget) {\n\tvar that = this\n\tvar e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\t$('.btn-close').removeClass('open')\n\tthis.$element.trigger(e)\n\n\tif (this.isShown || e.isDefaultPrevented()) return\n\n\t\tthis.isShown = true\n\n\n\tthis.checkScrollbar()\n\tthis.$body.addClass('modal-open')\n\n\tthis.setScrollbar()\n\tthis.escape()\n\n\tthis.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n\tthis.backdrop(function () {\n\t\tvar transition = $.support.transition && that.$element.hasClass('fade')\n\n\tif (!that.$element.parent().length) {\nthat.$element.appendTo(that.$body) // don't move modals dom position\n}\n\nthat.$element\n.show()\n.scrollTop(0)\n\nif (transition) {\nthat.$element[0].offsetWidth // force reflow\n}\n\nthat.$element\n.addClass('in')\n.attr('aria-hidden', false)\n\nthat.enforceFocus()\n\nvar e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\ntransition ?\nthat.$element.find('.modal-dialog') // wait for modal to slide in\n.one('bsTransitionEnd', function () {\n\tthat.$element.trigger('focus').trigger(e)\n})\n.emulateTransitionEnd(300) :\nthat.$element.trigger('focus').trigger(e)\n})\n}\n\nModal.prototype.hide = function (e) {\n\tif (e) e.preventDefault()\n\n\t\te = $.Event('hide.bs.modal')\n\n\tthis.$element.trigger(e)\n\n\tif (!this.isShown || e.isDefaultPrevented()) return\n\n\t\tthis.isShown = false\n\n\tthis.$body.removeClass('modal-open')\n\n\tthis.resetScrollbar()\n\tthis.escape()\n\n\t$(document).off('focusin.bs.modal')\n\n\tthis.$element\n\t.removeClass('in')\n\t.attr('aria-hidden', true)\n\t.off('click.dismiss.bs.modal')\n\n\t$.support.transition && this.$element.hasClass('fade') ?\n\tthis.$element\n\t.one('bsTransitionEnd', $.proxy(this.hideModal, this))\n\t.emulateTransitionEnd(300) :\n\tthis.hideModal();\n\t$('.view').removeClass('isBlured');\n}\n\nModal.prototype.enforceFocus = function () {\n\t$(document)\n.off('focusin.bs.modal') // guard against infinite focus loop\n.on('focusin.bs.modal', $.proxy(function (e) {\n\tif (this.$element[0] !== e.target && !this.$element.has(e.target).length) {\n\t\tthis.$element.trigger('focus')\n\t}\n}, this))\n}\n\nModal.prototype.escape = function () {\n\tif (this.isShown && this.options.keyboard) {\n\t\tthis.$element.on('keyup.dismiss.bs.modal', $.proxy(function (e) {\n\t\t\te.which == 27 && this.hide()\n\t\t}, this))\n\t} else if (!this.isShown) {\n\t\tthis.$element.off('keyup.dismiss.bs.modal')\n\t}\n}\n\nModal.prototype.hideModal = function () {\n\tvar that = this\n\tthis.$element.fadeOut('400', function() {\n\t\t\n\t});\n\tthis.backdrop(function () {\n\t\tthat.$element.trigger('hidden.bs.modal')\n\t})\n}\n\nModal.prototype.removeBackdrop = function () {\n\tthis.$backdrop && this.$backdrop.remove()\n\tthis.$backdrop = null\n}\n\nModal.prototype.backdrop = function (callback) {\n\tvar that = this\n\tvar animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n\tif (this.isShown && this.options.backdrop) {\n\t\tvar doAnimate = $.support.transition && animate\n\n\t\tthis.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n\t\t.appendTo(this.$body)\n\n\t\tthis.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n\t\t\tif (e.target !== e.currentTarget) return\n\t\t\t\tthis.options.backdrop == 'static'\n\t\t\t? this.$element[0].focus.call(this.$element[0])\n\t\t\t: this.hide.call(this)\n\t\t}, this))\n\nif (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n\tthis.$backdrop.addClass('in')\n\nif (!callback) return\n\n\tdoAnimate ?\nthis.$backdrop\n.one('bsTransitionEnd', callback)\n.emulateTransitionEnd(150) :\ncallback()\n\n} else if (!this.isShown && this.$backdrop) {\n\tthis.$backdrop.removeClass('in')\n\n\tvar callbackRemove = function () {\n\t\tthat.removeBackdrop()\n\t\tcallback && callback()\n\t}\n\t$.support.transition && this.$element.hasClass('fade') ?\n\tthis.$backdrop\n\t.one('bsTransitionEnd', callbackRemove)\n\t.emulateTransitionEnd(150) :\n\tcallbackRemove()\n\n} else if (callback) {\n\tcallback()\n}\n}\n\nModal.prototype.checkScrollbar = function () {\n\tif (document.body.clientWidth >= window.innerWidth) return\n\t\tthis.scrollbarWidth = this.scrollbarWidth || this.measureScrollbar()\n}\n\nModal.prototype.setScrollbar = function () {\n\tvar bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)\n\tif (this.scrollbarWidth) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)\n}\n\nModal.prototype.resetScrollbar = function () {\n\tthis.$body.css('padding-right', '')\n}\n\nModal.prototype.measureScrollbar = function () { // thx walsh\n\tvar scrollDiv = document.createElement('div')\n\tscrollDiv.className = 'modal-scrollbar-measure'\n\tthis.$body.append(scrollDiv)\n\tvar scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n\tthis.$body[0].removeChild(scrollDiv)\n\treturn scrollbarWidth\n}\n\n\n// MODAL PLUGIN DEFINITION\n// =======================\n\nfunction Plugin(option, _relatedTarget) {\n\treturn this.each(function () {\n\t\tvar $this   = $(this)\n\t\tvar data    = $this.data('bs.modal')\n\t\tvar options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n\t\tif (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n\t\t\tif (typeof option == 'string') data[option](_relatedTarget)\n\t\t\t\telse if (options.show) data.show(_relatedTarget)\n\t\t\t})\n}\n\nvar old = $.fn.modal\n\n$.fn.modal             = Plugin\n$.fn.modal.Constructor = Modal\n\n\n// MODAL NO CONFLICT\n// =================\n\n$.fn.modal.noConflict = function () {\n\t$.fn.modal = old\n\treturn this\n}\n\n\n// MODAL DATA-API\n// ==============\n\n$(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n\tvar $this   = $(this)\n\tvar href    = $this.attr('href')\nvar $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) // strip for ie7\nvar option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\nif ($this.is('a')) e.preventDefault()\n\n\t$target.one('show.bs.modal', function (showEvent) {\nif (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown\n\t$target.one('hidden.bs.modal', function () {\n\t\t$this.is(':visible') && $this.trigger('focus')\n\t})\n})\nPlugin.call($target, option, this)\n})\n\n}(jQuery);\n"],"sourceRoot":"/source/"}