function CanvasSaver(t){this.url=t,this.savePNG=function(e,n,a,i,o){if(e&&t){n=n||"picture";var s=e.toDataURL("image/png");if(s=s.substr(s.indexOf(",")+1).toString(),a=a||10,i=i||1111,"false"==i)return void $.ajax({type:"POST",async:!1,url:t,data:{imgdata:s,name:n,down:"false",coord:a},success:o});var d=document.createElement("input");d.setAttribute("name","imgdata"),d.setAttribute("value",s),d.setAttribute("type","hidden");var l=document.createElement("input");l.setAttribute("name","name"),l.setAttribute("value",n+".png");var c=document.createElement("input");c.setAttribute("name","down"),c.setAttribute("value",i),c.setAttribute("type","hidden");var r=document.createElement("input");r.setAttribute("name","coord"),r.setAttribute("value",a),r.setAttribute("type","hidden");var u=document.createElement("form");u.method="post",u.action=t,u.appendChild(d),u.appendChild(l),u.appendChild(c),u.appendChild(r),document.body.appendChild(u),u.submit(),document.body.removeChild(u)}}}var checkid,updatename,updatecountry,updatepublished,updatefile;$(document).ready(function(){function t(){$(".btnedit").click(function(){var t=$(this).data("id"),e=$("#"+t+"-name").text(),n=$("#"+t+"-country").text(),a=$("#"+t+"-url").text(),i=$("."+t+"_chkupd").val();$("#"+t+"-name").html("<input type=text id=iName"+t+" value="+e+' name="name">'),$("#"+t+"-country").html("<input type=text id=iCoutry-"+t+" value="+n+' name="country">'),$("#"+t+"-url").html("<input type=text id=iUrl"+t+" value="+a+' name="url">'),$("#iCoutry-"+t).val(n),$("#"+t+"-isPublished").html(1==i?"<input class="+t+"_chkupd type=checkbox checked value=1 >":"<input class="+t+"_chkupd type=checkbox value=0 >")}),$(".btnupdate").click(function(t){t.preventDefault(),checkid=$(this).data("id"),e(checkid)}),$(".btndelete").click(function(t){t.preventDefault(),checkid=$(this).data("id"),a(checkid)}),$(".btnuploadedited").click(function(){checkid=$(this).data("id"),updatefile=$("#"+checkid+'-form input[name="file"]').val(),console.log(checkid+" "+updatefile),i(checkid)})}function e(t){updatename=$("#"+t+'-name input[name="name"]').val(),updatecountry=$("#"+t+'-country input[name="country"]').val(),updateurl=$("#"+t+'-url input[name="url"]').val(),updatepublished=$("."+t+"_chkupd").prop("checked")?1:0,n(t)}function n(t){$.ajax({type:"POST",async:!1,url:"assets/data/updatedata.php",data:{updatename:updatename,updatecountry:updatecountry,updatepublished:updatepublished,updateurl:updateurl,updateid:t}}).done(function(){$("#"+t+"-name").html(updatename),$("#"+t+"-country").html(updatecountry),$("#"+t+"-url").html(updateurl),$("#"+t+"-isPublished").html(1==updatepublished?"<input class="+t+"_chkupd type=checkbox checked value=1 disabled>":"<input class="+t+"_chkupd type=checkbox value=0 disabled>")})}function a(t){$.ajax({type:"POST",async:!1,url:"assets/data/deletedata.php",data:{updateid:t}}).done(function(e){console.log("succes "+e),$("#"+t+"-row").fadeOut("400",function(){})})}function i(t){var e=new FormData(document.getElementById(t+"-form"));e.append("CustomField","This is some extra data"),$.ajax({type:"POST",url:"assets/data/uploadimagedata.php?updatefileid="+t,data:e,processData:!1,contentType:!1}).done(function(t){console.log("succesful file upload call "+t)})}function o(){$("#submit").click(function(t){t.preventDefault(),s()}),$(".btn-add").click(function(){$(".view").addClass("isBlured")}),$(".close").click(function(){$(".view").removeClass("isBlured")})}function s(){f||(p=encodeURIComponent($('#pic-form input[name="name"]').val()),h=encodeURIComponent($('#pic-form input[name="country"]').val()),m=encodeURIComponent($('#pic-form input[name="url"]').val()),file=encodeURIComponent($('#pic-form input[name="file"]').val()),f=!0,d())}function d(){var t=new FormData(document.getElementById("pic-form"));t.append("CustomField","This is some extra data"),$.ajax({url:"assets/data/savedata.php?&name="+p+"&country="+h+"&url="+m+"&file="+file,type:"POST",data:t,processData:!1,contentType:!1}).done(function(){l(f)})}function l(){f?$("#pic-form").fadeOut(500,function(){$("#thanks").css({opacity:"1"})}):alert("An error occurred saving to the database.")}function c(){$("#login").click(function(t){t.preventDefault(),r()})}function r(){y||(b=encodeURIComponent($('#login-form input[name="username"]').val()),v=encodeURIComponent($('#login-form input[name="password"]').val()),y=!0,u())}function u(){$.ajax({type:"POST",async:!1,url:"assets/data/login.php",data:{username:b,password:v}}).done(function(t){console.log("succes "+t),"login"===t?document.location.href="admin.php":$("#_notification").append("No such a username or combination")})}t();var p,h,m,f=!1;o(),$(".main").bind("touchstart",function(){}),$("#url").hide(),$("#file").hide(),$("#_url").click(function(){$("#url").toggle(),$("#file").hide()}),$("#_file").click(function(){$("#file").toggle(),$("#url").hide()}),$(".btn-close").click(function(){$(this).toggleClass("open")});var b,v,y=!1;if(c(),$("#_tattoo").length){canvas.style.webkitFilter="blur(1px)";var g=document.getElementById("_tattoo"),k=g.getContext("2d"),w=new CanvasSaver("assets/data/saveimage.php")}if($("#_btnwant").click(function(){w.savePNG(g,"dotdot",coord,"true"),k.clearRect(0,0,g.width,g.height),canvas.style.webkitFilter="blur(0px)",k.fillText("Thank you for using Dot:Dot! <3",100,120),k.fillText("Enjoy & stay awesome!",120,160),k.fillText("PS Don't forget to upload your spectacular pic to our gallery!",20,180),k.fillText("Generate new tattoo's by clicking 'Hate it'!",80,200)}),$("#_btnhate").click(function(){canvas.style.webkitFilter="blur(1px)",$("#_explanation p").fadeOut(),$(".popover").fadeOut()}),$("#_pinBtn").click(function(){w.savePNG(g,"dotdot",coord,"false",function(t){var e="http://dotdot.be/",n=e+t,a="&description=DOT:DOT is a random unique tattoo generator. Generate your own tattoo at dotdot.be",i="//www.pinterest.com/pin/create/link/?url="+e+"index.php&media="+n+a;$("#_pinBtn").prop("href",i)})}),$("#_arm").click(function(){isArm=!0,$(".main").css("background-image","url('assets/images/bg-2.png')")}),$("#_back").click(function(){isArm=!1,$(".main").css("background-image","url('assets/images/bg.png')")}),$("#video").length){var C=$("#video");C[0].removeAttribute("controls"),$(".control").fadeIn(500),$(".video-wrapper").hover(function(){$(".control").stop().fadeIn()},function(){$(".control").stop().fadeOut()}).on("click",function(){$(".btnPlay").find(".icon-play").addClass("icon-pause").removeClass("icon-play"),$(this).unbind("click"),C[0].play()}),C.on("click",function(){x()}),$("#_btnPlay").on("click",function(){x()});var x=function(){C[0].paused||C[0].ended?($(".btnPlay").addClass("paused"),$(".btnPlay").find(".icon-play").addClass("icon-pause").removeClass("icon-play"),C[0].play()):($(".btnPlay").removeClass("paused"),$(".btnPlay").find(".icon-pause").removeClass("icon-pause").addClass("icon-play"),C[0].pause())}}}),+function(t){"use strict";function e(e,a){return this.each(function(){var i=t(this),o=i.data("bs.modal"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,s)),"string"==typeof e?o[e](a):s.show&&o.show(a)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var n=this,a=t.Event("show.bs.modal",{relatedTarget:e});t(".btn-close").removeClass("open"),this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),a&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=t.Event("shown.bs.modal",{relatedTarget:e});a?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal(),t(".view").removeClass("isBlured"))},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.fadeOut("400",function(){}),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var n=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var a=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=a,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var a=t(this),i=a.attr("href"),o=t(a.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),a.data());a.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){a.is(":visible")&&a.trigger("focus")})}),e.call(o,s,this)})}(jQuery);
//# sourceMappingURL=main.min.js.map